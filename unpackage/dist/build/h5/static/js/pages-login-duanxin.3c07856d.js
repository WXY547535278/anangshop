(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-duanxin"],{1486:function(t,o,i){"use strict";i.r(o);var n=i("95bc"),e=i("bad4");for(var a in e)"default"!==a&&function(t){i.d(o,t,function(){return e[t]})}(a);i("3583");var r=i("2877"),s=Object(r["a"])(e["default"],n["a"],n["b"],!1,null,"24536a65",null);o["default"]=s.exports},1617:function(t,o,i){"use strict";var n=i("288e");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,i("6b54"),i("87b3");var e=n(i("f499")),a=n(i("9c42")),r=n(i("4735")),s=i("667f"),l={name:"loginDuanxin",data:function(){return{phone:"",phoneLogin:{url:"unifiedPhoneLogin",method:"post"},verification:{url:"sendVerifyCode",method:"post"},verificationData:{phone:this.phone,type:"2"},verificationTxt:"获取验证码"}},created:function(){(0,s.is_login)();var t=(0,s.getParams)("code");t&&this.getUserInfo(t)},methods:{wx_login:function(){var t=(0,s.getParams)("code");if(console.log(t),t)this.getUserInfo(t);else{var o=(0,s.getAppid)(),i=window.location.href;window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o+"&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_base&state=1#wechat_redirect"}},getUserInfo:function(t){var o={url:"getUserInfoByCode?code="+t,method:"get"},i={};a.default.httpRequest(o,(0,e.default)(i)).then(function(t){if(console.log("授权",t),200==t.data.code){if(2==t.data.data.type)return console.log(t.data.data.type),window.location.href=(0,s.employee_url)()+"?token="+t.data.data.token,!1;uni.setStorage({key:"token",data:t.data.data.token,success:function(){console.log("success")}}),uni.switchTab({url:"../tabbar/tabbar-2/tabbar-2"})}else wx.showToast({title:t.data.msg,icon:"none",duration:1e3})}).catch(function(t){console.log("err",t)})},getYanZhengMa:function(){var t=this;this.verificationData.phone=this.phone,console.log(this.verificationData),a.default.httpRequest(this.verification,this.verificationData).then(function(o){if(console.log(o),500==o.data.code&&uni.showToast({title:o.data.msg,icon:"none",duration:1e3}),200==o.data.code){t.verificationTxt=60;var i=setInterval(function(){t.verificationTxt--,0==t.verificationTxt&&(t.verificationTxt="重新发送",clearInterval(i))},1e3)}},function(t){console.log(t)})},formSubmit:function(t){var o=this;t.detail.value.login_type="0",console.log(t.detail.value),console.log("form发生了submit事件，携带数据为："+(0,e.default)(t.detail.value)),a.default.httpRequest(this.phoneLogin,(0,e.default)(t.detail.value)).then(function(t){console.log(t),400==t.data.code&&uni.showToast({title:t.data.msg,icon:"none",duration:1e3}),200==t.data.code&&(console.log("短信登录成功返回的token数据"),console.log(t.data.data.token),r.default.setCookie(t.data.data.employeeInfo.login_id,2),o.$store.commit("swapId",t.data.data.employeeInfo.login_id),uni.setStorage({key:"token",data:t.data.data.token,success:function(t){function o(){return t.apply(this,arguments)}return o.toString=function(){return t.toString()},o}(function(){console.log(success)})}),uni.showToast({title:"登录成功！",icon:"success",duration:2e3,success:function(){console.log("haha"),setTimeout(function(){uni.switchTab({url:"../tabbar/tabbar-2/tabbar-2"})},2e3)}}))},function(t){console.log(t)})}}};o.default=l},3583:function(t,o,i){"use strict";var n=i("c641"),e=i.n(n);e.a},4735:function(t,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,i("28a5");var n=void 0,e=function(t,o){var i=new Date;i.setTime(i.getTime()+864e5*o),window.document.cookie="login_id="+t+";path=/;expires="+i.toGMTString()},a=function(){if(document.cookie.length>0)for(var t=document.cookie.split("; "),o=0;o<t.length;o++){var i=t[o].split("=");"userName"==i[0]?n.ruleForm.userName=i[1]:"userPwd"==i[0]&&(n.ruleForm.password=i[1])}},r=function(){e("",-1)},s={setCookie:e,getCookie:a,clearCookie:r};o.default=s},"667f":function(t,o,i){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.getParams=a,o.getAppid=r,o.employee_url=s,o.is_login=l,o.wx_login=c,i("386d"),i("4917"),i("3b2b");var n="wxc0ea276f46bfe519",e="http://anang-employee.weiwochina.com";function a(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(o);return null!=i?unescape(i[2]):null}function r(){return n}function s(){return e}function l(){var t=uni.getStorageSync("token");if(!t)return!1;uni.switchTab({url:"/pages/tabbar/tabbar-2/tabbar-2"})}function c(){var t=a("code");if(t)getUserInfo(t);else{var o=r(),i=window.location.href;window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+o+"&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_base&state=1#wechat_redirect"}}},"95bc":function(t,o,i){"use strict";var n=function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("v-uni-view",{staticClass:"login"},[i("v-uni-view",{staticClass:"logo-container"},[i("v-uni-view",{staticClass:"logo-container-img"}),i("v-uni-view",{staticClass:"logo-container-decoration"},[i("v-uni-view",{staticClass:"decoration"}),i("v-uni-view",{staticClass:"decoration"})],1)],1),i("v-uni-view",{staticClass:"login-input"},[i("v-uni-form",{staticClass:"login-input-form",attrs:{method:"post"},on:{submit:function(o){o=t.$handleEvent(o),t.formSubmit(o)}}},[i("v-uni-view",{staticClass:"login-input-form-content"},[i("v-uni-view",{staticClass:"input-item"},[i("v-uni-image",{attrs:{src:"../../static/img/loginImg/icon_mobilephone.png"}}),i("v-uni-input",{attrs:{confirmtype:"text",name:"phone",autocomplete:"off",placeholder:"请输入手机号码",required:""},model:{value:t.phone,callback:function(o){t.phone=o},expression:"phone"}})],1),i("v-uni-view",{staticClass:"input-item"},[i("v-uni-image",{attrs:{src:"../../static/img/loginImg/lock.png"}}),i("v-uni-input",{attrs:{confirmtype:"text",name:"verifyCode",autocomplete:"off",placeholder:"请输入验证码",required:""}}),i("v-uni-view",{staticClass:"yanZhengMa",on:{click:function(o){o=t.$handleEvent(o),t.getYanZhengMa(o)}}},[t._v(t._s(t.verificationTxt))])],1),i("v-uni-view",{staticClass:"link"},[i("v-uni-navigator",{staticClass:"left",attrs:{url:"../register/register"}},[t._v("注册")]),i("v-uni-navigator",{staticClass:"right",attrs:{url:"zhanghao"}},[t._v("密码登录")])],1)],1),i("v-uni-button",{staticClass:"submit-button",attrs:{"form-type":"submit"}},[t._v("登 录")]),i("v-uni-view",{staticClass:"line"},[i("v-uni-text",{staticClass:"line-left"}),i("v-uni-text",{staticClass:"line-text"},[t._v("OR")]),i("v-uni-text",{staticClass:"line-right"})],1),i("v-uni-navigator",{staticClass:"zhaohui",attrs:{url:"forgetPwd"}},[t._v("忘记密码？")])],1)],1),i("v-uni-view",{staticClass:"login-footer"},[t._v("© 2019 安昂商城 版权所有")])],1)},e=[];i.d(o,"a",function(){return n}),i.d(o,"b",function(){return e})},ad7a:function(t,o,i){var n=i("b041");o=t.exports=i("2350")(!1),o.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.login[data-v-24536a65]{width:100%;height:100%;position:relative}.login .logo-container[data-v-24536a65]{position:absolute;width:100%;height:%?478?%;top:0;background-image:url('+n(i("79f5"))+");background-size:100% 100%;background-repeat:no-repeat}.login .logo-container-img[data-v-24536a65]{width:%?298?%;height:%?114?%;background-image:url("+n(i("089b"))+");background-repeat:no-repeat;background-size:cover;position:absolute;left:%?212?%;top:%?132?%;z-index:1000}.login .logo-container-decoration[data-v-24536a65]{width:100%;height:%?280?%;position:absolute;top:%?300?%;left:0}.login .logo-container-decoration .decoration[data-v-24536a65]{position:absolute;left:0;width:100%;height:100%;background-image:url("+n(i("3149"))+");background-size:150% 150%;background-position:30% 0}.login .logo-container-decoration .decoration[data-v-24536a65]:last-child{-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.login-input[data-v-24536a65]{position:absolute;left:%?49?%;top:%?360?%;width:%?652?%;height:%?774?%;background:#fff;-webkit-box-shadow:%?0?% %?16?% %?119?% %?0?% hsla(0,0%,45.5%,.3);box-shadow:%?0?% %?16?% %?119?% %?0?% hsla(0,0%,45.5%,.3);border-radius:%?44?% %?44?% %?44?% %?44?%}.login-input-form[data-v-24536a65]{padding:%?66?% %?50?% %?0?% %?50?%;line-height:%?64?%;display:block}.login-input-form-content .input-item[data-v-24536a65]{position:relative;width:%?550?%;height:%?64?%;border-bottom:%?2?% solid #e5e5e5}.login-input-form-content .input-item[data-v-24536a65]:first-child{margin-bottom:%?30?%}.login-input-form-content .input-item uni-image[data-v-24536a65]{width:%?40?%;height:%?40?%;margin-right:%?30?%}.login-input-form-content .input-item uni-input[data-v-24536a65]{font-size:%?26?%;display:inline-block;line-height:%?64?%}.login-input-form-content .input-item .yanZhengMa[data-v-24536a65]{position:absolute;text-align:center;font-size:%?24?%;color:#ff5207;right:0;top:%?12?%;width:%?150?%;height:%?40?%;line-height:%?40?%;background:#ddd;border-radius:%?16?%}.login-input-form-content .link[data-v-24536a65]{font-size:%?24?%;width:100%;height:%?64?%;position:relative}.login-input-form-content .link uni-navigator[data-v-24536a65]{display:inline-block}.login-input-form-content .link .left[data-v-24536a65]{margin-right:%?400?%;color:#fe6959}.login-input-form-content .link .right[data-v-24536a65]{color:#999}.login-input-form .submit-button[data-v-24536a65]{width:%?564?%;height:%?88?%;background:-webkit-gradient(linear,right top,left top,from(#fd8957),to(#ff4e02));background:-o-linear-gradient(right,#fd8957,#ff4e02);background:linear-gradient(-90deg,#fd8957,#ff4e02);-webkit-box-shadow:%?0?% %?12?% %?44?% %?4?% rgba(255,78,2,.3);box-shadow:%?0?% %?12?% %?44?% %?4?% rgba(255,78,2,.3);border-radius:%?44?%;color:#fff;font-size:%?34?%;position:absolute;left:%?44?%;top:%?334?%}.login-input-form .line[data-v-24536a65]{position:absolute;font-size:%?20?%;color:#acacac;left:%?92?%;top:%?482?%;width:%?486?%;height:%?26?%;line-height:%?26?%}.login-input-form .line uni-text[data-v-24536a65]{display:inline-block}.login-input-form .line-left[data-v-24536a65],.login-input-form .line-right[data-v-24536a65]{width:%?210?%;height:%?2?%;background-color:#eee;margin-bottom:%?6?%}.login-input-form .line-text[data-v-24536a65]{padding:0 %?6?%}.login-input-form .wechat[data-v-24536a65]{position:absolute;left:%?282?%;top:%?544?%;width:%?88?%;height:%?88?%;background-color:#28b602;background-image:url("+n(i("5a71"))+");background-size:70% 60%;background-repeat:no-repeat;background-position:50%;border-radius:50%}.login-input-form .zhaohui[data-v-24536a65]{position:absolute;left:%?266?%;top:%?710?%;font-size:%?24?%;color:#fe6959}.login-footer[data-v-24536a65]{width:100%;text-align:center;height:%?20?%;line-height:%?20?%;position:absolute;top:%?1236?%;font-size:%?24?%;color:#aaa}",""])},bad4:function(t,o,i){"use strict";i.r(o);var n=i("1617"),e=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(o,t,function(){return n[t]})}(a);o["default"]=e.a},c641:function(t,o,i){var n=i("ad7a");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var e=i("4f06").default;e("26c7d6f2",n,!0,{sourceMap:!1,shadowMode:!1})}}]);