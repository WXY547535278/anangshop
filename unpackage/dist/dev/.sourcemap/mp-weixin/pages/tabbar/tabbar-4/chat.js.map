{"version":3,"sources":["webpack:///D:/公司项目/安昂商城-员工端/anang-user-master-9e29b33263c7cdd03bd7b70650f408847beb86c0/pages/tabbar/tabbar-4/chat.vue?8fc8","webpack:///D:/公司项目/安昂商城-员工端/anang-user-master-9e29b33263c7cdd03bd7b70650f408847beb86c0/pages/tabbar/tabbar-4/chat.vue?95bc","webpack:///D:/公司项目/安昂商城-员工端/anang-user-master-9e29b33263c7cdd03bd7b70650f408847beb86c0/pages/tabbar/tabbar-4/chat.vue?5e13","webpack:///D:/公司项目/安昂商城-员工端/anang-user-master-9e29b33263c7cdd03bd7b70650f408847beb86c0/pages/tabbar/tabbar-4/chat.vue?5486","webpack:///D:/公司项目/安昂商城-员工端/anang-user-master-9e29b33263c7cdd03bd7b70650f408847beb86c0/pages/tabbar/tabbar-4/chat.vue","webpack:///D:/公司项目/安昂商城-员工端/anang-user-master-9e29b33263c7cdd03bd7b70650f408847beb86c0/pages/tabbar/tabbar-4/chat.vue?9ff0","webpack:///D:/公司项目/安昂商城-员工端/anang-user-master-9e29b33263c7cdd03bd7b70650f408847beb86c0/pages/tabbar/tabbar-4/chat.vue?bf3e"],"names":["data","style","pageHeight","contentViewHeight","footViewHeight","mitemHeight","scrollTop","content","messages","user","message","ws","WebSocket","token","chat","url","$store","state","login_id","method","illegalText","EXPS","components","MyHeader","chatInput","messageShow","mounted","getChatMessage","loadEmojiData","created","console","log","that","WebSocketTest","res","uni","getSystemInfoSync","windowHeight","screenWidth","methods","request","then","json","eval","slice","replaceFace","con","toString","indexOf","exps","i","length","replace","title","file","getInputMessage","http","httpTokenRequest","send","JSON","stringify","addMessage","push","scrollToBottom","query","createSelectorQuery","selectAll","boundingClientRect","select","exec","forEach","rect","height","onopen","logo","my_uid","onmessage","evt","received_msg","onclose","e","code","from_id","error"],"mappings":"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","file":"pages/tabbar/tabbar-4/chat.js","sourcesContent":["import { render, staticRenderFns } from \"./chat.vue?vue&type=template&id=1187772e&\"\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('1187772e', component.options)\n    } else {\n      api.reload('1187772e', component.options)\n    }\n    module.hot.accept(\"./chat.vue?vue&type=template&id=1187772e&\", function () {\n      api.rerender('1187772e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/公司项目/安昂商城-员工端/anang-user-master-9e29b33263c7cdd03bd7b70650f408847beb86c0/pages/tabbar/tabbar-4/chat.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=template&id=1187772e&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.messages, function(message, index) {\n    var m0 = _vm.replaceFace(message)\n    return {\n      $orig: _vm.__get_orig(message),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport MyHeader from '../../../components/header/header.vue'\nimport chatInput from '../../../components/chat/chatinput.vue';\nimport messageShow from '../../../components/chat/messageshow.vue';\nimport http from '../../../utils/http.js'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tstyle: {\n\t\t\t\tpageHeight: 0,\n\t\t\t\tcontentViewHeight: 0,\n\t\t\t\tfootViewHeight: 90,\n\t\t\t\tmitemHeight: 0,\n\t\t\t},\n\t\t\tscrollTop: 0,\n\t\t\t// 一开始展示的数据\n\t\t\tcontent: '',\n\t\t\tmessages: [{\n\t\t\t\tuser: 'home',\n\t\t\t\tcontent: '[累]'\n\t\t\t}, {\n\t\t\t\tuser: 'home',\n\t\t\t\tcontent: '你好！'\n\t\t\t},{\n\t\t\t\tuser: 'customer',\n\t\t\t\tcontent: '我很好'\n\t\t\t}],\n\t\t\tmessage: [],\n\t\t\tws: new WebSocket(\"ws://47.92.147.48:10086\"),\n\t\t\ttoken: '',\n\t\t\t//获取聊天记录\n\t\t\tchat: {\n\t\t\t\turl: 'getWechatMessageByService?login_id=' + this.$store.state.login_id + '&employess_id=505',\n\t\t\t\tmethod: 'get'\n\t\t\t},\n\t\t\t// 过滤聊天内容\n\t\t\tillegalText: {\n\t\t\t\turl: 'illegalTextTest',\n\t\t\t\tmethod: 'post'\n\t\t\t},\n\t\t\tEXPS: []\n\t\t};\n\t},\n\tcomponents: {\n\t\tMyHeader,\n\t\tchatInput,\n\t\tmessageShow\n\t},\n\tmounted() {\n\t\tthis.getChatMessage()\n\t\tthis.loadEmojiData()\n\t},\n\tcreated: function() {\n\t\t//设置状态管理器中的值\n\t\t// this.$store.commit('swapId','1112313')\n\t\t// 打印状态管理器中的值\n\t\tconsole.log(\"从状态管理器中取出的login_id\")\n\t\tconsole.log(this.$store.state.login_id);\n\t\tvar that = this\n\t\tthis.WebSocketTest()\n\t\tconst res = uni.getSystemInfoSync();\n\t\tthis.style.pageHeight = res.windowHeight;\n\t\tthis.style.contentViewHeight = res.windowHeight - uni.getSystemInfoSync().screenWidth / 750 * (100); //像素\n\t},\n\tmethods: {\n\t\t// 获取聊天表情\n\t\tloadEmojiData: function() {\n\t\t\tuni.request({\n\t\t\t\turl: '../../../static/emojiDB.json',\n\t\t\t\tmethod: 'get'\n\t\t\t}).then(res => {\n\t\t\t\tvar json = eval('(' + res[1].data + ')')\n\t\t\t\tthis.EXPS = json.EXPS.slice(0)\n\t\t\t})\n\t\t},\n\t\t// 输入框\n\t\treplaceFace: function(con) {\n\t\t\tif (!con) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (con.content.toString().indexOf('[') > -1) {\n\t\t\t\tvar exps = this.EXPS;\n\t\t\t\tfor (var i = 0; i < exps.length; i++) {\n\t\t\t\t\t// 交换title为file\n\t\t\t\t\tcon.content = con.content.replace('['+exps[i].title+']', '<image src=\"' + exps[i].file + '\"  alt=\"\"></image>');\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn con;\n\t\t},\n\t\tgetInputMessage: function(message) { //获取子组件的输入数据\n\t\t\tvar that = this\n\t\t\thttp.httpTokenRequest(that.illegalText, {\n\t\t\t\t\t\"text\": message.content\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log('过滤成功成功返回的消息', res.data)\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\t'type': 'text',\n\t\t\t\t\t\t'from_id': this.$store.state.login_id,\n\t\t\t\t\t\t'to_id': 505,\n\t\t\t\t\t\t'content': res.data.data\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(\"过滤后的消息\", data)\n\t\t\t\t\tthat.ws.send(JSON.stringify(data))\n\t\t\t\t})\n\t\t\tconsole.log(\"获取输入框输入的消息：\")\n\t\t\tconsole.log(message)\n\t\t\tthis.addMessage('customer', message.content)\n\t\t\t// this.toRobot(message.content);\n\t\t},\n\t\taddMessage: function(user, content) {\n\t\t\tvar that = this;\n\t\t\tthat.messages.push({\n\t\t\t\tuser: user,\n\t\t\t\tcontent: content\n\t\t\t});\n\t\t\tthis.scrollToBottom();\n\t\t},\n\t\tscrollToBottom: function() {\n\t\t\tvar that = this;\n\t\t\tvar query = uni.createSelectorQuery();\n\t\t\tquery.selectAll('.m-item').boundingClientRect();\n\t\t\tquery.select('#scrollview').boundingClientRect();\n\t\t\tquery.exec(function(res) {\n\t\t\t\tthat.style.mitemHeight = 0;\n\t\t\t\tres[0].forEach(function(rect) {\n\t\t\t\t\t// console.info(rect.height);\n\t\t\t\t\tthat.style.mitemHeight = that.style.mitemHeight + rect.height + 20;\n\t\t\t\t});\n\t\t\t\tif (that.style.mitemHeight > that.style.contentViewHeight) {\n\t\t\t\t\tthat.scrollTop = that.style.mitemHeight - that.style.contentViewHeight;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 连接WebSocketTest服务器\n\t\tWebSocketTest: function() {\n\t\t\tvar that = this\n\t\t\t// 打开一个 web socket\n\t\t\t// ws = new WebSocket(\"ws://47.92.147.48:10086\"); // 测试服务器\n\t\t\t// ws = new WebSocket(\"ws://127.0.0.1:10086\"); // 本地服务器\n\t\t\t// 连接成功的回调\n\t\t\tthat.ws.onopen = function() {\n\t\t\t\t// Web Socket 已连接上，使用 send() 方法发送数据\n\t\t\t\tconsole.log('连接成功, 发送自己的标识')\n\t\t\t\tvar logo = {\n\t\t\t\t\t'type': 'login',\n\t\t\t\t\t'from_id': that.my_uid\n\t\t\t\t}\n\t\t\t\tthat.ws.send(JSON.stringify(logo))\n\t\t\t};\n\t\t\t// 发送的数据成功 的回调\n\t\t\tthat.ws.onmessage = function(evt) {\n\t\t\t\tvar received_msg = evt.data;\n\t\t\t\tconsole.log('接收到的消息', received_msg)\n\t\t\t};\n\t\t\tthat.ws.onclose = function(e) {\n\t\t\t\t// 关闭 websocket\n\t\t\t\tconsole.log('连接关闭', e)\n\t\t\t};\n\t\t},\n\t\tgetChatMessage: function() {\n\t\t\thttp.httpTokenRequest(this.chat, {}).then(res => {\n\t\t\t\tconsole.log(res.data);\n\t\t\t\tif (res.data.code == 200) {\n\t\t\t\t\tthis.message = res.data.data\n\t\t\t\t\tconsole.log(this.message);\n\t\t\t\t\tfor (var i = 0; i < this.message.length; i++) {\n\t\t\t\t\t\tif (this.message[i].from_id == this.$store.state.login_id) {\n\t\t\t\t\t\t\tthis.messages.push({\n\t\t\t\t\t\t\t\tuser: 'customer',\n\t\t\t\t\t\t\t\tcontent: this.message[i].content\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.messages.push({\n\t\t\t\t\t\t\t\tuser: 'home',\n\t\t\t\t\t\t\t\tcontent: this.message[i].content\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, error => {\n\t\t\t\tconsole.log(error);\n\t\t\t})\n\t\t}\n\t}\n}\n","import mod from \"-!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}